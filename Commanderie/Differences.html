<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>15 Diff√©rences avec Loupe</title>
  <style>
    body {
      margin: 2em;
      font-family: Georgia, serif;
      background-color: #f9f4ee;
      color: #333;
      text-align: center;
    }
    h1 {
      margin-bottom: 1em;
    }
    .gallery {
      display: flex;
      justify-content: center;
      gap: 2em;
    }
    /* Chaque conteneur inclut l‚Äôimage/SVG et sa loupe */
    .magnifier-container {
      position: relative;
      width: 45%;             /* responsive : chaque image fait ~45% */
      max-width: 600px;
      border: 4px double #666;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
    }
    .magnifier-container svg {
      width: 100%;
      height: auto;
      display: block;
    }
    /* La loupe : un cercle vide avec fond agrandi */
    .lens {
      position: absolute;
      display: none;
      border: 3px solid #444;
      width: 120px;
      height: 120px;
      border-radius: 50%;
      overflow: hidden;
      pointer-events: none;
      /* Le fond sera positionn√© en JS */
      background-repeat: no-repeat;
    }
  </style>
</head>
<body>

  <h1>üîç Jeu des diff√©rences avec loupe synchronis√©e üîç</h1>
  <p>Passez la souris sur la gravure cod√©e pour faire appara√Ætre deux loupes en m√™me temps.</p>

  <div class="gallery">
    <!-- Conteneur 1 : Codee.png + hotspots (SVG interactif) -->
    <div id="wrap1" class="magnifier-container">
      <svg id="svgInteractive"
           viewBox="0 0 600 1020"
           preserveAspectRatio="xMidYMid meet">
        <image href="Codee.png" x="0" y="0" width="100%" height="100%"/>
        <!-- vos 15 zones cliquables ici -->
        <circle class="zone" data-id="1" cx="104" cy="687" r="10"/>
        <!-- ‚Ä¶ -->
        <g id="marks"></g>
      </svg>
      <div id="lens1" class="lens"></div>
    </div>

    <!-- Conteneur 2 : Originale.png -->
    <div id="wrap2" class="magnifier-container">
      <svg viewBox="0 0 600 1020"
           preserveAspectRatio="xMidYMid meet">
        <image href="Originale.png" x="0" y="0" width="100%" height="100%"/>
      </svg>
      <div id="lens2" class="lens"></div>
    </div>
  </div>

  <script>
    (function(){
      const wrap1 = document.getElementById('wrap1');
      const wrap2 = document.getElementById('wrap2');
      const lens1 = document.getElementById('lens1');
      const lens2 = document.getElementById('lens2');
      const zoom = 2;  // facteur de grossissement

      // pr√©parer le fond de chaque loupe
      lens1.style.backgroundImage = "url('Codee.png')";
      lens2.style.backgroundImage = "url('Originale.png')";

      // quand on bouge sur la premi√®re gravure‚Ä¶
      wrap1.addEventListener('mousemove', e => {
        // on affiche les deux loupes
        lens1.style.display = lens2.style.display = 'block';
        const pos = getCursorPos(e, wrap1);
        moveLens(lens1, wrap1, pos);
        moveLens(lens2, wrap2, pos);
      });
      // masquer les loupes en quittant
      wrap1.addEventListener('mouseleave', () => {
        lens1.style.display = lens2.style.display = 'none';
      });

      // r√©cup√®re la position relative du curseur dans un conteneur
      function getCursorPos(e, container) {
        const rect = container.getBoundingClientRect();
        return {
          x: e.clientX - rect.left,
          y: e.clientY - rect.top
        };
      }

      // place et configure la loupe en fonction de la position
      function moveLens(lens, container, pos) {
        const cw = container.clientWidth;
        const ch = container.clientHeight;
        const lw = lens.offsetWidth;
        const lh = lens.offsetHeight;
        // centrer la loupe sur le curseur
        let x = pos.x - lw/2;
        let y = pos.y - lh/2;
        // limites
        x = Math.max(0, Math.min(x, cw - lw));
        y = Math.max(0, Math.min(y, ch - lh));
        lens.style.left = x + 'px';
        lens.style.top  = y + 'px';
        // taille de fond (image agrandie)
        lens.style.backgroundSize = (cw * zoom) + 'px ' + (ch * zoom) + 'px';
        // d√©calage de fond pour centrer l‚Äôendroit agrandi
        lens.style.backgroundPosition = 
          `-${x * zoom}px -${y * zoom}px`;
      }
    })();
  </script>

</body>
</html>
